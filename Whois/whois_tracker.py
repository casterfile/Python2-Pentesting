#Run as administrator
import whois
import time
import argparse

def saveToFile(site):
	try:
		#create the file log object
		filename = 'site_monitor_log_'+time.strftime("%d_%m_%Y") + '.txt'
		fileLog = open(filename,'a')
		#write the trace information to the file
		fileLog.write(site)
		#write a separator
		fileLog.write('\r\n')
		fileLog.write('-----------------------')
		fileLog.write('\r\n')
		#close the file log object
		fileLog.close

	except:
		pass

def usage():
	print 
	print
	print "Examples: "
	print "whois_tracker -w google.com"
	exit(0)

def WhoisTracking(siteAddress):
	site = whois.whois(siteAddress)
	print site
	siteOutput =  str(site) + ""
	saveToFile(siteOutput)
	

def main():
	# Parse the command line arguments
	parser = argparse.ArgumentParser('WhoIs Tracker Start')
	# parser.add_argument("-w", "--website", type = str, help = "Website Name ex. google.com", default = 'google.com')
	parser.add_argument("-w", "--website", type = str, help = "Website Name ex. google.com")
	args = parser.parse_args()

	if args.website == None:
		usage()
	else:
		print "Starting"
		# Store the arguments values
		siteAddress = args.website

		#Call the port scan function
		WhoisTracking(siteAddress)
	
if __name__ == '__main__':
	main()